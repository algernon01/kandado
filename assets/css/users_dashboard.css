:root{
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;

  --bg: #f7f9fc;
  --bg-soft: #eef2f7;
  --surface: #ffffff;
  --text: #0f172a;
  --muted: #64748b;
  --border: #e5e7eb;
  --ring: rgba(37,99,235,.45);
  --shadow: 0 2px 6px rgba(2,6,23,0.05), 0 10px 30px rgba(2,6,23,0.10);

  --primary: #2563eb;
  --primary-600:#1e40af;

  --success-bg:#d1fae5;
  --success:#16a34a;

  --danger-bg:#fee2e2;
  --danger:#dc2626;

  --warning-bg:#fff3cd;
  --warning:#8B4513;

  --occ-green:#16a34a;
  --occ-orange:#f59e0b;
  --occ-red:#dc2626;

  --card-radius: 18px;
  --btn-radius: 12px;
  --transition: 180ms cubic-bezier(.2,.7,.3,1);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  font-family: 'Inter', 'Segoe UI', Roboto, system-ui, -apple-system, Arial, sans-serif;
  background: linear-gradient(180deg, var(--bg) 0%, var(--bg-soft) 100%);
  margin:0;
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.sr-only{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

.container{
  max-width:1200px;
  margin:auto;
  padding: calc(16px + env(safe-area-inset-top)) max(16px, env(safe-area-inset-right)) calc(24px + env(safe-area-inset-bottom)) max(16px, env(safe-area-inset-left));
}

h2{
  font-size: clamp(22px, 3.5vw, 32px);
  font-weight: 800; margin: 0; letter-spacing:-0.02em;
}
.overview-grid > article.kpi:not(.kpi-occupancy) {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-size: 20px;
}

.page-header{
  display:grid;
  grid-template-columns: 1fr;
  align-items:start;
  gap: var(--space-4);
  margin-bottom: var(--space-4);
}
@media (min-width: 720px){
  .page-header{
    grid-template-columns: 1fr auto;
  }
}

.title-wrap{ display:flex;align-items:flex-end;gap:var(--space-3);flex-wrap:wrap }
.legend{
  display:flex;align-items:center;gap:var(--space-2);flex-wrap:wrap
}
.legend .pill{
  display:inline-flex;align-items:center;gap:var(--space-2);
  background:var(--surface);border:1px solid var(--border);
  padding:6px 10px;border-radius:999px;font-size:12px;color:var(--muted);
  box-shadow: 0 1px 2px rgba(2,6,23,0.04);
}
.pill .dot{ width:8px;height:8px;border-radius:999px;display:inline-block; box-shadow:0 0 0 2px rgba(255,255,255,.9) inset }
.pill.available .dot{background:var(--success)}
.pill.occupied .dot{background:var(--danger)}
.pill.hold .dot{ background: var(--primary); }
.pill.maintenance .dot{ background: #8b5cf6; }

.toolbar{
  display:flex;
  flex-direction:column;
  align-items:stretch;
  gap: var(--space-2);
}
@media (min-width: 720px){
  .toolbar{
    align-items:flex-end;
    min-width: 260px;
    width: max-content;
  }
}

.toolbar-row{
  display:flex;
  align-items:center;
  gap: var(--space-2);
  justify-content:space-between;
}
@media (min-width: 720px){
  .toolbar-row{ justify-content:flex-end; }
}

.btn{
  display:inline-flex;align-items:center;gap:8px;
  padding:10px 14px;border-radius:10px;border:1px solid var(--border);
  background:var(--surface);color:var(--text);font-weight:600;cursor:pointer;
  transition: transform var(--transition), box-shadow var(--transition), background var(--transition), border-color var(--transition);
  min-height:44px;
  touch-action: manipulation;
}
.btn:hover{transform:translateY(-1px);box-shadow:var(--shadow);border-color:#dbe1ea}
.btn:active{transform:translateY(0);box-shadow:none}
.btn:focus-visible{outline:2px solid var(--ring);outline-offset:2px}
.btn-primary{background:var(--primary);border-color:transparent;color:#fff}
.btn-primary:hover{background:var(--primary-600)}
.last-updated{font-size:12px;color:var(--muted)}

.offline{
  display:flex;align-items:center;justify-content:center;
  background:#fff7ed;color:#9a3412;border:1px solid #fed7aa;
  border-radius:12px;padding:10px 12px;margin:14px 0;gap:10px;
  font-weight:600;
}
.hidden{display:none !important}

.overview{margin-top:4px;margin-bottom:14px}
.overview-grid{ display:grid; gap:14px; grid-template-columns: 1fr 1fr; }
@media (min-width: 720px){ .overview-grid{ grid-template-columns: 1.2fr repeat(5, 1fr); } }
.kpi{
  background:var(--surface);border:1px solid var(--border);
  border-radius:16px;padding:14px;box-shadow:var(--shadow);
  display:flex;flex-direction:column;justify-content:center
}
.kpi .kpi-title{font-size:12px;color:var(--muted);font-weight:700;margin-bottom:6px}
.kpi .kpi-sub{font-size:12px;color:var(--muted);margin-top:4px}

.kpi-occupancy{display:grid;grid-template-columns: clamp(72px, 24vw, 110px) 1fr;align-items:center;gap:14px}
.donut{
  --p:0; --c:var(--occ-green);
  width: clamp(72px, 24vw, 110px);
  height: clamp(72px, 24vw, 110px);
  border-radius:50%;
  background: conic-gradient(var(--c) calc(var(--p)*1%), #e5e7eb 0);
  position:relative;
  box-shadow: inset 0 0 0 8px #fff, var(--shadow);
  display:grid;
  place-items:center;
}
.donut::after{
  content:''; position:absolute; inset:12px; background:#fff; border-radius:50%;
  z-index:0;
}
.donut > *{ z-index:1; }
.donut .donut-label{
  font-weight:800;
  font-size: clamp(16px, 3.2vw, 22px);
  letter-spacing:-0.02em;
  color: var(--text);
}

.filter-bar{
  display:flex;align-items:center;justify-content:space-between;gap:12px;margin:12px 0 18px 0;flex-wrap:wrap;
}
@media (max-width: 720px){
  .filter-bar{
    position: sticky; top: calc(8px + env(safe-area-inset-top));
    z-index: 8; padding: 8px; margin-top: 0;
    background: linear-gradient(180deg, rgba(255,255,255,.8), rgba(255,255,255,.9));
    backdrop-filter: blur(6px);
    border:1px solid var(--border); border-radius:12px;
  }
}
.segmented{
  display:inline-flex; border:1px solid var(--border); border-radius:12px; background:var(--surface); box-shadow:var(--shadow);
  overflow:auto; max-width:100%; -webkit-overflow-scrolling: touch;
}
.seg{
  padding:10px 14px; min-height:44px;
  font-weight:700; font-size:13px; color:var(--muted);
  border:none; background:transparent; border-right:1px solid var(--border); cursor:pointer; white-space:nowrap;
}
.seg:last-child{border-right:none}
.seg.active{color:#fff;background:var(--primary)}
.seg:focus-visible{outline:2px solid var(--ring);outline-offset:0;border-radius:10px}

.search{
  position:relative;display:flex;align-items:center;min-width:220px;flex:1;max-width:320px
}
.search input{
  width:100%;padding:12px 40px 12px 12px;border-radius:10px;border:1px solid var(--border);background:#fff;
  font-weight:600;color:var(--text); min-height:44px;
}
.search input:focus{outline:2px solid var(--ring)}
.search .clear{
  position:absolute;right:8px;border:none;background:transparent;font-size:20px;line-height:1;cursor:pointer;color:#94a3b8;
  width:36px;height:36px;border-radius:8px;
}
.search .clear:hover{color:#475569}

.grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap:20px;
}
@media (min-width: 880px){
  .grid{ grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap:26px; }
}
.grid-busy{opacity:.98}

.locker{
  background:var(--surface);border-radius:var(--card-radius);
  box-shadow: var(--shadow);padding:18px;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  min-height:246px;border:1px solid var(--border);
  transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition), background var(--transition);
  position:relative;isolation:isolate;
  container-type: inline-size;
}
.locker:focus-within,
.locker:hover{transform:translateY(-2px);box-shadow:0 14px 36px rgba(2,6,23,0.14);border-color:rgba(37,99,235,.25)}
.locker.hidden{display:none}
.locker--highlight{box-shadow:0 0 0 3px rgba(37,99,235,.35), var(--shadow)}
.lnum{font-size:12px;font-weight:800;letter-spacing:.06em;text-transform:uppercase;margin-bottom:8px;color:var(--muted)}

.status{
  display:inline-flex;align-items:center;gap:8px;user-select:none;
  padding:8px 14px;border-radius:999px;font-weight:700;font-size:13px;margin-bottom:12px;
  border:1px solid rgba(15,23,42,0.06);
}
.status .status-dot{width:8px;height:8px;border-radius:999px;background:currentColor}
.status.available{background:var(--success-bg);color:var(--success)}
.status.occupied{background:var(--danger-bg);color:var(--danger)}
.status.occupied.no-item{background:#fff7ed;color:#d97706}
.status.hold{
  background: rgba(37,99,235,0.12);
  color: var(--primary);
}
.status.maintenance{
  background: #8b5cf6;
  color: #ffffff;
}

.price{font-weight:800;font-size:clamp(18px, 3.6vw, 20px);margin-bottom:8px}

.duration-container{display:flex;flex-direction:column;align-items:center;width:100%;gap:10px}
.duration{width:100%;display:flex;justify-content:center}
.duration select{
  width:100%;max-width:380px;padding:12px 44px 12px 14px;border-radius:12px;
  border:1px solid var(--border);background:#fff;color:#000;
  font-weight:600;cursor:pointer;outline:none;transition:border-color var(--transition), background var(--transition), box-shadow var(--transition);
  min-height:44px;
  appearance:none;
  background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6 8l4 4 4-4' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position: right 12px center;
}
.duration select:focus{border-color: var(--ring);background: #fff}
.duration select:focus-visible{outline:2px solid var(--ring);outline-offset:2px}

.reserveBtn{
  padding:12px 18px;border-radius:var(--btn-radius);
  border:none;background:var(--primary);color:#fff;font-weight:800;
  cursor:pointer;transition: transform var(--transition), box-shadow var(--transition), background var(--transition);
  width:100%;max-width:380px;min-height:44px;
  touch-action: manipulation;
}
.reserveBtn:hover{background:var(--primary-600);transform:translateY(-1px);box-shadow:var(--shadow)}
.reserveBtn:active{transform:translateY(0);box-shadow:none}
.reserveBtn:focus-visible{outline:2px solid var(--ring);outline-offset:2px}
.reserveBtn:disabled{background:#9ca3af;cursor:not-allowed;box-shadow:none;transform:none}

@container (min-width: 380px){
  .duration-container{flex-direction:row; align-items:stretch}
  .duration{flex:1}
  .reserveBtn{max-width:none}
}

.meta{
  margin-top:12px;width:100%;max-width:380px;border-top:1px dashed #e6e9f0;padding-top:10px
}
.meta-row{display:flex;align-items:center;justify-content:space-between;font-size:12px}
.meta-label{color:var(--muted)}
.meta-value{font-weight:800}
.meta-value.danger{color:var(--danger)}

.skeleton{ color: transparent !important; position: relative; }
.skeleton::after{
  content:''; position:absolute; inset:0; border-radius:var(--card-radius);
  background: linear-gradient(90deg, rgba(148,163,184,.15), rgba(148,163,184,.08), rgba(148,163,184,.15));
  background-size: 200% 100%; animation: shimmer 1.1s infinite linear;
}
@keyframes shimmer{0%{background-position: 200% 0}100%{background-position: -200% 0}}

.empty-state{
  margin-top:8px;padding:28px;border:1px dashed var(--border);
  border-radius:16px;background:#fff;text-align:center;color:var(--muted)
}
.empty-icon{font-size:24px;margin-bottom:6px}
.empty-title{font-weight:800;color:var(--text)}
.empty-sub{font-size:12px}

.swal2-popup{border-radius:16px}
.swal2-title{font-weight:800}

.checkout-strip{max-width:520px;background:var(--surface);border-radius:14px;box-shadow:var(--shadow);padding:18px}
.strip-top{display:flex;align-items:center;justify-content:space-between}
.store{display:flex;gap:12px;align-items:center}
.brand{
  width:48px;height:48px;border-radius:10px;display:flex;align-items:center;justify-content:center;
  background:linear-gradient(180deg, var(--bg) 0%, var(--surface) 100%); color: var(--primary);
}
.store-subtitle{font-size:12px;color:var(--muted)}
.store-title{font-weight:800}
.amount{font-weight:800;font-size:20px;white-space:nowrap}
.sep{height:1px;background:#eef2f6;margin:12px 0}
.section-title{font-weight:700;color:var(--muted);font-size:13px;margin-bottom:8px}
.pay-methods{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:8px}
.method{
  flex:1;min-width:120px;background:#f8fafc;border-radius:10px;padding:10px;
  border:1px solid transparent;cursor:pointer;display:flex;align-items:center;gap:10px;
  transition: border-color var(--transition), transform var(--transition), box-shadow var(--transition), background var(--transition);
  min-height:44px;
}
.method:hover{transform:translateY(-1px);box-shadow:0 6px 16px rgba(2,6,23,0.08)}
.method.active{border-color:rgba(37,99,235,0.35);background:#ecf2ff}
.method img{width:36px;height:24px;object-fit:contain}
.method:focus-visible{outline:2px solid var(--ring);outline-offset:2px}
.reference{display:flex;justify-content:space-between;font-size:14px}
.ref-label{color:var(--muted)}
.ref-value{font-weight:700}
.checkout-actions{display:flex;gap:10px;margin-top:14px;justify-content:flex-end}
.btn.cancel{background:#f1f5f9;color:#475569;border:none}
.btn.cancel:hover{background:#e2e8f0}
.btn.pay{background:var(--primary);color:#fff;border:none}
.btn.pay:hover{background:var(--primary-600)}

@media (pointer: coarse){
  .seg{ padding:12px 16px; }
  .search input{ padding:14px 44px 14px 14px; }
}

@media (prefers-reduced-motion: reduce){
  *{animation:none !important;transition:none !important}
}

@media (prefers-contrast: more){
  .btn, .seg, .duration select, .reserveBtn{outline:1.5px solid #334155}
}

.wallet-widget{
  display: inline-flex;
  align-items: center;
  gap: 10px;
  flex-wrap: nowrap;
  width: auto;
  align-self: flex-start;
}
@media (min-width: 720px){
  .wallet-widget{ align-self: auto; }
}

.wallet-card{
  display: inline-flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 8px 12px;
  box-shadow: var(--shadow);
  height: 42px;
  min-width: 176px;
  max-width: 280px;
  position: relative;
  overflow: hidden;
}
.wallet-card::before{
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(120% 80% at 100% 0%, rgba(37,99,235,0.10) 0%, transparent 60%);
  pointer-events:none;
}

.wallet-left{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-weight: 800;
  color: var(--text);
}
.wallet-icon{ font-size: 16px; line-height: 1; }
.wallet-title{ letter-spacing: -.01em; font-size: 13px; }

.wallet-right{ display: inline-flex; align-items: center; }
.wallet-balance{
  font-weight: 800;
  font-variant-numeric: tabular-nums;
  font-size: 16px;
  white-space: nowrap;
}

.wallet-topup-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 42px;
  min-width: 96px;
  padding: 0 14px;
  border-radius: 10px;
  font-weight: 800;
  white-space: nowrap;
  min-height: 0;
  line-height: 1;
}
.wallet-topup-btn:hover{ transform: translateY(-1px); box-shadow: var(--shadow); }
.wallet-topup-btn:active{ transform: translateY(0); box-shadow: none; }

@media (max-width: 720px){
  .toolbar{ width: 100%; }
}

.wallet-card:focus-visible, .wallet-topup-btn:focus-visible{
  outline:2px solid var(--ring);
  outline-offset:2px;
  border-radius:12px;
}

.reserve-popup.swal2-popup{
  width: clamp(360px, 92vw, 720px);
  padding: 16px;
  border-radius: 16px;
  box-shadow: var(--shadow);
}

.reserve-popup .swal2-html-container{
  margin: 0 !important;
  padding: 0 !important;
  overflow: visible;
}

@media (max-width: 720px){
  .reserve-popup.swal2-popup{
    height: 92dvh;
    display: flex;
    flex-direction: column;
  }
  .reserve-popup .swal2-html-container{
    flex: 1 1 auto;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    padding-right: 4px;
  }
  .reserve-popup .swal2-actions{
    position: sticky;
    bottom: 0;
    background: linear-gradient(180deg, rgba(255,255,255,0), #fff 40%);
    padding-top: 8px;
    margin-top: 8px;
  }
}

@media (min-width: 721px){
  .reserve-popup.swal2-popup{ max-height: none; }
  .reserve-popup .swal2-html-container{ overflow: visible; }
}

.reserve-modal{
  display: grid;
  gap: 12px;
}

.wallet-inline{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: var(--shadow);
  font-weight: 800;
}
.wallet-inline .amount{
  font-variant-numeric: tabular-nums;
  color: var(--text);
}

.duration-grid{
  display: grid;
  gap: 10px;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
}
@media (min-width: 720px){
  .duration-grid{ gap: 12px; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); }
}

.option-card{
  position: relative;
  display: block;
  border: 1px solid var(--border);
  background: #fff;
  border-radius: 12px;
  padding: 12px;
  box-shadow: var(--shadow);
  cursor: pointer;
  transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition), background var(--transition);
  min-height: 64px;
}
.option-card:hover{ transform: translateY(-1px); box-shadow: 0 8px 24px rgba(2,6,23,0.12); }
.option-card input{ position: absolute; inset: 0; opacity: 0; pointer-events: none; }

.option-card .opt-main{
  display: flex; align-items: center; justify-content: space-between; gap: 10px;
  font-weight: 700;
}
.option-card .opt-title{ color: var(--text); font-size: 14px; }
.option-card .opt-price{ color: var(--muted); font-size: 13px; font-variant-numeric: tabular-nums; }

.option-card input:checked + .opt-main{
  background: rgba(37,99,235,0.06);
  border-radius: 8px;
  outline: 2px solid var(--ring);
  outline-offset: -2px;
}
.option-card:has(input:checked){ border-color: rgba(37,99,235,0.40); }

.option-card.insufficient{
  opacity: .75;
  background: linear-gradient(180deg, #fff, #fff);
  position: relative;
}
.option-card.insufficient::after{
  content: "Top up needed";
  position: absolute;
  right: 10px; bottom: 10px;
  background: #fff1f2; color: #be123c;
  border: 1px solid #fecdd3;
  font-size: 11px; font-weight: 800;
  padding: 3px 6px; border-radius: 999px;
}

.wallet-warning{
  display: none;
  background: #fff8e1;
  color: #92400e;
  border: 1px solid #fde68a;
  border-radius: 10px;
  padding: 8px 10px;
  font-weight: 700;
}
.wallet-warning.show{ display: block; }

.summary-row{
  display: flex; align-items: center; justify-content: space-between;
  gap: 10px;
  border-top: 1px dashed var(--border);
  padding-top: 10px;
  margin-top: 2px;
}
.summary-row .total{ font-weight: 800; }

.reserve-modal .reference .ref-value{
  color: var(--primary);
  text-decoration: none;
}
.reserve-modal .reference .ref-value:hover{
  text-decoration: underline;
}

@media (pointer: coarse){
  .option-card{ padding: 14px; }
  .option-card .opt-title{ font-size: 15px; }
}

.reserve-popup .swal2-title{ text-align:center; letter-spacing:-0.02em; font-weight:800; }
.reserve-modal .section-title{ text-align:center; font-weight:800; color:var(--muted); letter-spacing:.12em; }

.option-card{ text-align:center; border-radius:14px; }
.option-card .opt-main{ display:flex; align-items:center; justify-content:space-between; gap:10px; }

.option-card .opt-price{
  display:inline-block;
  white-space: nowrap;
  word-break: keep-all;
  overflow-wrap: normal;
  font-variant-numeric: tabular-nums;
  font-weight:700; color:var(--muted);
}

.option-card:has(input:checked){
  border-color: rgba(37,99,235,.45);
  box-shadow: 0 0 0 3px rgba(37,99,235,.20), var(--shadow);
  background: linear-gradient(180deg, #ffffff, #f8fbff);
}

@media (max-width: 720px){
  .option-card .opt-main{
    flex-direction: column;
    justify-content: center; align-items: center; gap:6px;
  }
  .option-card .opt-title{ text-align:center; }
  .option-card .opt-price{
    padding:4px 10px; border-radius:999px; border:1px solid var(--border); background:#f1f5f9;
  }

  .reserve-popup.swal2-popup{ height:92dvh; display:flex; flex-direction:column; }
  .reserve-popup .swal2-html-container{
    flex:1 1 auto; overflow-y:auto; -webkit-overflow-scrolling:touch; padding-right:4px;
  }
  .reserve-popup .swal2-actions{
    position:sticky; bottom:0;
    background:linear-gradient(180deg, rgba(255,255,255,0), #fff 40%);
    margin-top:8px; padding-top:8px;
  }
}

@media (min-width: 721px){
  .reserve-popup .swal2-html-container{ overflow:visible; }
}

@media (min-width: 721px){
  .option-card .opt-main{
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }
  .option-card .opt-title,
  .option-card .opt-price{ text-align: center; }
}