/* Layout and base buttons */
main#content .page-head { display:flex; align-items:center; justify-content:space-between; gap:.75rem; margin:.25rem 0 1rem; }
.page-title { display:flex; align-items:center; gap:.6rem; font-weight:800; letter-spacing:.2px; color: var(--primary-700); font-size:30px; }
.page-title i { font-size:1.2rem; color:#fff; background: linear-gradient(135deg,var(--brand-1),var(--brand-2));
  border:1px solid rgba(0,0,0,.05); width:36px; height:36px; display:grid; place-items:center; border-radius:10px; }

.btn { display:inline-flex; align-items:center; gap:.45rem; padding:.6rem .9rem; border-radius:12px; font-weight:700; text-decoration:none; cursor:pointer; border:1px solid transparent; }
.btn i { font-size: .95rem; }
.btn-primary { background: linear-gradient(135deg,var(--brand-1),var(--brand-2)); color:#fff; box-shadow: var(--shadow-1); }
.btn-outline  { background: #fff; color: var(--primary-700); border-color: var(--border); }
.btn-soft     { background: var(--surface-2); color: var(--text); border-color: var(--border); }
.btn-danger   { background: var(--danger); color:#fff; }
.btn:focus-visible { outline:2px solid var(--primary); outline-offset:2px; }

/* Metrics */
.metrics { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: .9rem; margin-bottom: 1rem; }
@media (max-width: 1000px) { .metrics{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width: 520px)  { .metrics{ grid-template-columns: 1fr; } }
.metric-card { background: var(--surface); border:1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow-2); padding: .9rem .95rem; }
.metric-top { display:flex; align-items:center; justify-content:space-between; }
.metric-top .label { color: var(--muted); font-size:.85rem; font-weight:700; letter-spacing:.02em; }
.metric-top .chip  { font-size:.72rem; padding:.2rem .5rem; border-radius:999px; border:1px solid var(--border); background: var(--surface-2); color: var(--muted); }
.metric-value { font-size:1.4rem; font-weight:800; margin-top:.3rem; }
.metric-trend { font-size:.8rem; color: var(--muted); margin-top:.2rem; }

/* Filters */
.filter-bar { background: var(--surface); border:1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow-2); padding: .85rem; display:grid; gap:.7rem; }
.filter-row { display:grid; grid-template-columns: 1.2fr .8fr .8fr .7fr .7fr .9fr .7fr; gap:.6rem; }
.filter-row > .field { min-width: 0; } /* prevent overflow */
@media (max-width: 1100px) { .filter-row{ grid-template-columns: 1fr 1fr 1fr 1fr; } }
@media (max-width: 700px)  { .filter-row{ grid-template-columns: 1fr 1fr; } }

.field { display:flex; flex-direction:column; gap:.25rem; }
.field label { font-size:.8rem; font-weight:700; color:var(--muted); }
.field input, .field select { border:1px solid var(--border); border-radius:10px; padding:.55rem .65rem; background:#fff; font: inherit; color: var(--text); width:100%; min-width:0; }

.filter-actions { display:flex; align-items:center; gap:.45rem; flex-wrap:wrap; }

/* Table */
.table-wrap { background: var(--surface); border:1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow-2); margin-top: 1rem; overflow: hidden; }
.table-toolbar { display:flex; align-items:center; justify-content:space-between; padding:.7rem .8rem; border-bottom:1px solid var(--border); background: var(--surface-2); }
.table-toolbar .left { display:flex; align-items:center; gap:.5rem; color:var(--muted); font-weight:700; }
.table-toolbar .right { display:flex; align-items:center; gap:.45rem; flex-wrap:wrap; }
table.payments { width:100%; border-collapse: collapse; }
table.payments th, table.payments td { padding:.7rem .8rem; text-align:left; vertical-align: middle; }
table.payments thead th { background: var(--surface-2); border-bottom:1px solid var(--border); font-size:.8rem; color: var(--muted); }
table.payments tbody tr + tr td { border-top:1px dashed var(--border); }
table.payments tbody tr:hover { background: #fafcff; }
.th-sort { display:inline-flex; align-items:center; gap:.25rem; text-decoration:none; color:inherit; }
.amount { font-weight:800; }
.method-chip { display:inline-flex; align-items:center; gap:.35rem; padding:.25rem .55rem; border-radius:999px; font-weight:800; font-size:.75rem; }
.method-gcash { background:#e9f2ff; color:#1d4ed8; border:1px solid #dbe7ff; }
.method-maya  { background:#eef0ff; color:#4338ca; border:1px solid #e1e4ff; margin-top:2px; }

/* Reference # + Copy (inline) */
.ref-inline{ display:inline-flex; align-items:center; gap:.4rem; white-space:nowrap; }
.ref-inline code{ background:#f6f8ff; border:1px solid var(--border); padding:.15rem .4rem; border-radius:6px; display:inline-block; max-width: clamp(140px, 28vw, 320px); overflow:hidden; text-overflow:ellipsis; }
.copy-btn{ width:30px; height:30px; border-radius:8px; border:1px solid #e2e8f0; background:#f8fafc; color:#475569; display:inline-flex; align-items:center; justify-content:center; }
.copy-btn:hover{ background:#eef2ff; border-color:#c7d2fe; color:#3730a3; }
.copy-btn:focus-visible{ outline:2px solid #3730a3; outline-offset:2px; }

/* Actions (friendlier colors) */
.actions { display:flex; gap:.4rem; align-items:center; }
.icon-btn { display:inline-flex; align-items:center; justify-content:center; border-radius:10px; border:1px solid var(--border); background:#fff; cursor:pointer; width:34px; height:34px; font-weight:700; }
.icon-btn:focus-visible { outline:2px solid currentColor; outline-offset:2px; }
.icon-btn.with-text{ width:auto; height:auto; padding:.35rem .6rem; gap:.35rem; white-space:nowrap; }
/* View = Blue */
.icon-btn.view { background:#eef6ff; border-color:#dbeafe; color:#1d4ed8; }
.icon-btn.view:hover { background:#dbeafe; }
/* Edit = Amber */
.icon-btn.edit { background:#fff7ed; border-color:#ffedd5; color:#b45309; }
.icon-btn.edit:hover { background:#ffedd5; }
/* Delete = Red */
.icon-btn.delete { background:#fee2e2; border-color:#fecaca; color:#b91c1c; }
.icon-btn.delete:hover { background:#fecaca; }
/* MOBILE VIEW (≤760px) — card layout like your example */
@media (max-width: 760px) {
  /* hide header, keep table as a list of cards */
  table.payments thead { display: none; }
  table.payments, table.payments tbody { display: block; width: 100%; }

  /* each row becomes a card */
  table.payments tr {
    display: block;
    background: #fff;
    border: 1px solid var(--border);
    border-radius: 14px;
    box-shadow: var(--shadow-2);
    margin: .6rem .35rem;
    overflow: visible;              /* FIX: allow buttons to render fully */
  }

  /* each cell = one line: [label]  value */
  table.payments td {
    display: flex;
    align-items: center;
    gap: .6rem;
    padding: .65rem .75rem;
    border-top: 1px dashed var(--border);
    text-align: left !important;
    box-sizing: border-box;         /* safety for tight screens */
  }
  table.payments td:first-child { border-top: 0; }

  /* left-side labels (from your data-label attrs) */
  table.payments td::before {
    content: attr(data-label);
    flex: 0 0 96px;               /* label column width */
    min-width: 96px;
    font-size: .78rem;
    font-weight: 700;
    color: var(--muted);
  }

  /* keep values tidy */
  table.payments td[data-label="User"] { align-items: flex-start; }
  table.payments td[data-label="User"] > div {
    display: flex; flex-direction: column; gap: .15rem;
    /* EMAIL WRAP FIX */
    min-width: 0;                 /* allow flex child to shrink/wrap */
    flex: 1 1 auto;
  }
  /* wrap long emails (link or text) */
  table.payments td[data-label="User"] small,
  table.payments td[data-label="User"] a {
    display: block;
    overflow-wrap: anywhere;      /* modern */
    word-break: break-word;       /* fallback */
  }

  table.payments td[data-label="Method"] .method-chip { margin-top: -1px; }
  table.payments td[data-label="Amount"] .amount { font-weight: 800; }

  /* keep reference + copy inline */
  table.payments td[data-label="Reference #"] .ref-inline { gap: .5rem; }

  /* actions row — FIX: allow wrapping, no clipping */
  table.payments td[data-label="Actions"] {
    align-items: flex-start;
  }
  table.payments td[data-label="Actions"] .actions {
    display: flex;
    flex-wrap: wrap;               /* was nowrap — let buttons wrap */
    gap: .35rem .4rem;
    white-space: normal;           /* was nowrap — prevents clipping */
    max-width: 100%;
    width: 100%;
    flex: 1 1 auto;                /* take available space next to label */
  }
  table.payments td[data-label="Actions"] .icon-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    min-width: 0;                  /* allow shrink on narrow screens */
    flex: 0 1 auto;                /* no overflow when space is tight */
  }
  table.payments td[data-label="Actions"] .icon-btn.with-text {
    padding: .32rem .55rem;        /* tighter so 3 pills fit */
    font-size: .85rem;
    line-height: 1.2;
  }

  /* optional: make the red delete pill never get cut by inner text */
  table.payments td[data-label="Actions"] .icon-btn.delete {
    overflow: visible;             /* ensure glow/border not clipped */
  }

  /* optional: a little tighter card spacing inside the wrapper */
  .table-wrap { border-radius: var(--radius); overflow: visible; }

  /* ultra-small phones: free a bit more space */
  @media (max-width: 360px) {
    table.payments td::before { flex: 0 0 84px; min-width: 84px; }
    table.payments td[data-label="Actions"] .icon-btn.with-text .label { display: none; } /* icons only */
    table.payments td[data-label="Actions"] .icon-btn.with-text { padding: .45rem; }
  }
}



/* Pagination */
.pagination { display:flex; align-items:center; gap:.25rem; padding:.7rem; justify-content:flex-end; }
.page-link { display:inline-flex; align-items:center; justify-content:center; width:34px; height:34px; border-radius:10px; border:1px solid var(--border); background:#fff; text-decoration:none; color:var(--text); font-weight:700; }
.page-link.active { background: rgba(34,197,94,.18); border-color: rgba(34,197,94,.35); color: var(--active-green-1); }
.page-link:hover { background:#f8fbff; }

/* Modals */
.modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:1200; background: rgba(15,23,42,.35); padding:1rem; }
.modal.open { display:flex; }
.modal-card { width:min(720px, 96vw); background:#fff; border-radius:16px; border:1px solid var(--border); box-shadow: var(--shadow-2); overflow:hidden; }
.modal-head { display:flex; align-items:center; justify-content:space-between; gap:.6rem; padding:.9rem 1rem; background: var(--surface-2); border-bottom:1px solid var(--border); }
.modal-body { padding: 1rem; display:grid; gap:.7rem; }
.modal-grid { display:grid; gap:.6rem; grid-template-columns: 1fr 1fr; }
.modal-grid > .field { min-width:0; } /* Fix overflow in modal */
@media (max-width: 700px) { .modal-grid{ grid-template-columns: 1fr; } }
.modal-foot { display:flex; justify-content:flex-end; gap:.5rem; padding: .8rem 1rem; border-top:1px solid var(--border); background: #fff; }

.error { color: #dc2626; font-size:.78rem; }

/* Searchable user picker (combobox) */
.combo { position:relative; }
.combo input[type="text"] { padding-right:2.2rem; }
.combo .clear { position:absolute; right:.4rem; top:50%; transform:translateY(-50%); border:1px solid var(--border);
  width:28px; height:28px; border-radius:8px; background:#fff; display:grid; place-items:center; cursor:pointer; }
.combo .list { position:absolute; top:calc(100% + 6px); left:0; right:0; background:#fff; border:1px solid var(--border);
  border-radius:12px; box-shadow:var(--shadow-2); max-height:260px; overflow:auto; z-index:1300; }
.combo .item { padding:.5rem .65rem; cursor:pointer; }
.combo .item:hover, .combo .item.active { background:#f6f8ff; }

/* Empty state */
.empty { padding: 2.2rem 1rem; text-align:center; color: var(--muted); }
.empty i { font-size:2rem; margin-bottom:.25rem; color: var(--primary); opacity:.85; }

/* Center the column titles */
table.payments thead th { 
  text-align: center;
}

/* (optional) ensure the sortable header link centers nicely */
table.payments thead th .th-sort {
  margin: 0 auto;            /* centers the inline element */
}

/* Center selected columns (3rd → 8th) */
table.payments th:nth-child(3),
table.payments td:nth-child(3),
table.payments th:nth-child(4),
table.payments td:nth-child(4),
table.payments th:nth-child(5),
table.payments td:nth-child(5),
table.payments th:nth-child(6),
table.payments td:nth-child(6),
table.payments th:nth-child(7),
table.payments td:nth-child(7),
table.payments th:nth-child(8),
table.payments td:nth-child(8) {
  text-align: center;
}

/* —— small polish for crisp X glyph inside rounded buttons —— */
.icon-btn i { font-size: 1.05rem; line-height: 1; display: inline-block; }
.modal-head .icon-btn { background:#fff; border-color: var(--border); }
.modal-head .icon-btn:hover { background:#f6f8ff; border-color:#dbeafe; }
